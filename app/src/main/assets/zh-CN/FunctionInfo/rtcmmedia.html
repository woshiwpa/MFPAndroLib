<html>
<head>
<title>可编程科学计算器帮助</title>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8"></head>
<body style="background-color:white;">
<h2 style="color:blue">可编程科学计算器帮助：RTC多媒体函数</h2>
<table border="1" style="font-family:times;color:green;">
<tr>
<th>函数名</th>
<th>函数帮助信息</th>
</tr>
<tr>
<td><center>add_peer_stream</center></td>
<td><p>::mfp::multimedia::webrtc_lib::add_peer_stream(1) :</p>
<p>add_peer_stream函数将多媒体流（也就是视频和音频）链入web RTC的peer connection对象。注意此处的web RTC是指的用于支持声音和视频通信的web RTC函数库，而不是用于支持数据通信的WEBRTC协议栈。它只有一个参数，就是peer connection对象的Id，也就是peer connection对象连接的远端的地址。</p>
</td>
</tr>
<tr>
<td><center>add_rtc_media_ice_candidate</center></td>
<td><p>::mfp::multimedia::webrtc_lib::add_rtc_media_ice_candidate(2) :</p>
<p>add_rtc_media_ice_candidate函数将一个ICE协议候选对象加入到peer connection对象的ICE候选对象列表中。它有两个参数，第一个参数是peer connection对象的Id。第二个参数是基于字符串的ICE候选对象的内容。</p>
</td>
</tr>
<tr>
<td><center>add_rtc_video_output</center></td>
<td><p>::mfp::multimedia::webrtc_lib::add_rtc_video_output(5) :</p>
<p>add_rtc_video_output将一个RTC视频子窗口加到显示窗口上。它有五个参数，第一个参数是显示窗口的句柄，该句柄是open_screen_display函数的返回值。剩下的四个参数分别是基于整数的视频子窗口的左上顶点的横坐标，纵坐标，宽度和高度。这四个参数决定了视频子窗口在显示窗口上的位置。</p>
</td>
</tr>
<tr>
<td><center>close_rtc_media_peer</center></td>
<td><p>::mfp::multimedia::webrtc_lib::close_rtc_media_peer(1) :</p>
<p>本函数关闭一个web RTC的peer connection对象。注意此处的web RTC是指的用于支持声音和视频通信的web RTC函数库，而不是用于支持数据通信的WEBRTC协议栈。本函数唯一的参数是peer connection对象的Id，也就是它的远端地址。</p>
</td>
</tr>
<tr>
<td><center>create_rtc_media_answer</center></td>
<td><p>::mfp::multimedia::webrtc_lib::create_rtc_media_answer(5) :</p>
<p>本函数在接收到一个offer信令之后创建一个web RTC的answer信令。注意此处的web RTC是指的用于支持声音和视频通信的web RTC函数库，而不是用于支持数据通信的WEBRTC协议栈。本函数有5个参数。第一个是peer connection对象的id。第二个是SDP的类型。该参数应该就是一个"offer"字符串。第三个参数是SDP的内容，也就是offer信令的内容。第四个参数是强制性的限制参数集。最后一个参数是可选的限制参数集。最后一个参数可以省略。本函数的一个例子是create_rtc_media_answer(remoteAddr, sdpType, sdpContent, [["OfferToReceiveAudio", "true"], ["OfferToReceiveVideo", supportVideoStr]], [["DtlsSrtpKeyAgreement", "true"]])。</p>
</td>
</tr>
<tr>
<td><center>create_rtc_media_offer</center></td>
<td><p>::mfp::multimedia::webrtc_lib::create_rtc_media_offer(3) :</p>
<p>本函数创建一个web RTC的offer信令。注意此处的web RTC是指的用于支持声音和视频通信的web RTC函数库，而不是用于支持数据通信的WEBRTC协议栈。本函数有3个参数。第一个是peer connection对象的id。第二个参数是强制性的限制参数集。最后一个参数是可选的限制参数集。最后一个参数可以省略。本函数的一个例子是create_rtc_media_offer(remoteAddr, [["OfferToReceiveAudio", "true"], ["OfferToReceiveVideo", supportVideoStr]], [["DtlsSrtpKeyAgreement", "true"]])。</p>
</td>
</tr>
<tr>
<td><center>get_audio_track_enable</center></td>
<td><p>::mfp::multimedia::webrtc_lib::get_audio_track_enable(1) :</p>
<p>本函数测试音轨是否已经被激活。如果是，返回True，否则返回False。这个函数仅有一个参数，就是一个显示窗口的句柄。该句柄是open_screen_display函数的返回值。</p>
</td>
</tr>
<tr>
<td><center>get_rtc_video_output_count</center></td>
<td><p>::mfp::multimedia::webrtc_lib::get_rtc_video_output_count(1) :</p>
<p>本函数返回一个显示窗口上的RTC视频子窗口的个数。本函数仅有一个参数就是显示窗口的句柄。该句柄是open_screen_display函数的返回值。</p>
</td>
</tr>
<tr>
<td><center>get_rtc_video_output_lefttop</center></td>
<td><p>::mfp::multimedia::webrtc_lib::get_rtc_video_output_lefttop(2) :</p>
<p>本函数返回一个包含两个元素的数组。第一个元素是一个RTC视频输出子窗口的左上角的x坐标。第二个元素是该RTC视频输出子窗口的左上角的y坐标。这个函数有两个参数。第一个参数是一个显示窗口的句柄。该句柄是open_screen_display函数的返回值。第二个参数是该RTC视频输出子窗口在显示窗口的RTC视频输出子窗口序列中的索引。第一个RTC视频输出子窗口的索引是0，第二个RTC视频输出子窗口的索引是1，以此类推。</p>
</td>
</tr>
<tr>
<td><center>get_video_track_enable</center></td>
<td><p>::mfp::multimedia::webrtc_lib::get_video_track_enable(1) :</p>
<p>本函数测试视频功能是否已经被激活。如果是，返回True，否则返回False。这个函数仅有一个参数，就是一个显示窗口的句柄。该句柄是open_screen_display函数的返回值。</p>
</td>
</tr>
<tr>
<td><center>initialize_rtc_mmedia</center></td>
<td><p>::mfp::multimedia::webrtc_lib::initialize_rtc_mmedia(0) :</p>
<p>本函数用于初始化web RTC库。注意此处的web RTC是指的用于支持声音和视频通信的web RTC函数库，而不是用于支持数据通信的WEBRTC协议栈。如果初始化成功，函数返回True，否则返回False。</p>
</td>
</tr>
<tr>
<td><center>link_video_stream</center></td>
<td><p>::mfp::multimedia::webrtc_lib::link_video_stream(4) :</p>
<p>此函数将web RTC视频流链接到一个RTC视频输出窗口。它有四个参数。第一个是显示窗口句柄，该句柄可以从open_screen_display函数调用中返回。第二个是peer connection对象的Id。第三个是视频流轨的ID。最后一个是RTC视频输出子窗口在显示窗口的RTC视频输出子窗口序列中的索引。此函数不会返回任何值。如果任何参数无效，或者无法将视频流链接到视频输出窗口，本函数会抛出一个异常。</p>
</td>
</tr>
<tr>
<td><center>receive_rtc_mmedia_message</center></td>
<td><p>::mfp::multimedia::webrtc_lib::receive_rtc_mmedia_message(1) :</p>
<p>此函数取回一个web RTC消息。注意此处的web RTC是指的用于支持声音和视频通信的web RTC函数库，而不是用于支持数据通信的WEBRTC协议栈。本函数只有一个参数，就是等待的时间。如果该参数是一个正数，则代表等待的毫秒数。如果该参数是0，函数立即返回。如果是一个负数，函数会阻塞等待直到有消息到来。如果在等待超时后仍然没有消息到来，则返回null。如果函数取回了一个合法的消息，则该函数的返回值是一个四个元素的数组。第一个元素是消息的目标peer connection对象的id。第二个元素是当前RTC会话的id。第三个元素是消息的类型。最后一个元素是消息的内容。如果消息是RTC信令，消息的类型则是"signal"，而消息的内容则是一个Json字符串。该Json字符串的"type"域值是信令的类型，也就是"offer"，"answer"或者"candidate"；如果信令的类型是"offer"或者"answer"，则该Json字符串的"sdp"域值是SDP的内容。如果消息是peer connection的事件，消息的类型则是"pc"，而消息的内容则是一个Json字符串。该Json字符串的"type"域值是事件的类型，比如"ice_connection_change"；而"content"域值则是基于字符的事件内容。</p>
</td>
</tr>
<tr>
<td><center>remove_peer_stream</center></td>
<td><p>::mfp::multimedia::webrtc_lib::remove_peer_stream(1) :</p>
<p>此函数移除peer connection对象的视频流。这个函数仅有一个参数，也就是peer connection对象的Id。这个函数不返回任何值。</p>
</td>
</tr>
<tr>
<td><center>set_audio_track_enable</center></td>
<td><p>::mfp::multimedia::webrtc_lib::set_audio_track_enable(2) :</p>
<p>此函数激活或者关闭音轨。这个函数有两个参数。第一个参数是一个显示窗口的句柄。该显示窗口的句柄可以从open_screen_display函数调用中返回。第二个是一个布尔值，True表示激活音轨而false则表示关闭音轨。这个函数的返回值是音轨之前的状态。True表示函数调用之前是激活状态而false则表示函数调用之前是关闭状态。</p>
</td>
</tr>
<tr>
<td><center>set_rtc_media_remote_description</center></td>
<td><p>::mfp::multimedia::webrtc_lib::set_rtc_media_remote_description(3) :</p>
<p>本函数在接收到一个answer信令之后设置web RTC的远程描述。注意此处的web RTC是指的用于支持声音和视频通信的web RTC函数库，而不是用于支持数据通信的WEBRTC协议栈。本函数有3个参数。第一个是peer connection对象的id。第二个是SDP的类型。该参数应该就是一个"answer"字符串。第三个参数是SDP的内容，也就是answer信令的内容。本函数不返回任何值。本函数的一个例子是set_rtc_media_remote_description(remoteAddr, sdpType, sdpContent)。</p>
</td>
</tr>
<tr>
<td><center>set_video_track_enable</center></td>
<td><p>::mfp::multimedia::webrtc_lib::set_video_track_enable(2) :</p>
<p>此函数激活或者关闭视频功能。这个函数有两个参数。第一个参数是一个显示窗口的句柄。该显示窗口的句柄可以从open_screen_display函数调用中返回。第二个是一个布尔值，True表示激活视频功能而false则表示关闭视频功能。这个函数的返回值是视频功能之前的状态。True表示函数调用之前是激活状态而false则表示函数调用之前是关闭状态。</p>
</td>
</tr>
<tr>
<td><center>start_local_stream</center></td>
<td><p>::mfp::multimedia::webrtc_lib::start_local_stream(2) :</p>
<p>此函数开启web RTC本地视频。注意此处的web RTC是指的用于支持声音和视频通信的web RTC函数库，而不是用于支持数据通信的WEBRTC协议栈。这个函数有两个参数。第一个参数是一个显示窗口的句柄。该显示窗口的句柄可以从open_screen_display函数调用中返回。第二个是个是RTC视频输出子窗口在显示窗口的RTC视频输出子窗口序列中的索引（第一个视频输出子窗口的索引值为0，第二个子窗口索引的值是1，以此类推）。这个函数如果调用成功，其返回值是True。否则，本函数返回False。</p>
</td>
</tr>
<tr>
<td><center>stop_local_stream</center></td>
<td><p>::mfp::multimedia::webrtc_lib::stop_local_stream(1) :</p>
<p>此函数关闭web RTC本地视频。注意此处的web RTC是指的用于支持声音和视频通信的web RTC函数库，而不是用于支持数据通信的WEBRTC协议栈。这个函数只有一个参数。该参数是一个显示窗口的句柄。该显示窗口的句柄可以从open_screen_display函数调用中返回。本函数没有返回值。</p>
</td>
</tr>
<tr>
<td><center>unlink_video_stream</center></td>
<td><p>::mfp::multimedia::webrtc_lib::unlink_video_stream(2...) :</p>
<p>此函数断开视频流向RTC视频输出子窗口的输出。这个函数有两种工作模式。第一种工作模式有3个参数分别为一个显示窗口的句柄（该显示窗口的句柄可以从open_screen_display函数调用中返回）；一个peer connection对象的id；以及一个视频轨的id。第二种工作模式有两个参数分别为一个显示窗口的句柄和一个RTC视频输出子窗口在显示窗口的RTC视频输出子窗口序列中的索引（第一个视频输出子窗口的索引值为0，第二个子窗口索引的值是1，以此类推）。这个函数返回断开的视频轨的数目。</p>
</td>
</tr>
</table>
</body>
</html>
